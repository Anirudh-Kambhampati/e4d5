{"ast":null,"code":"var _jsxFileName = \"/Users/akwg7/Documents/react/RISE1/file-explorer-rise/frontend/src/pages/ShareFilesPage/ShareFiles.jsx\",\n  _s = $RefreshSig$();\nimport { CircularProgress } from \"@mui/material\";\nimport React, { useMemo } from \"react\";\nimport { useSelector } from \"react-redux\";\nimport { useParams } from \"react-router-dom\";\nimport { usePostUserDataMutation } from \"../../apiServices/usersService\";\nimport Check from \"../../components/CheckBox/Check\";\nimport { getFolderTree, getIsLoading, getSelectedUser } from \"./../../redux/folderTree/folderTreeSlice\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ShareFiles = _ref => {\n  _s();\n  var _selectedUser$userDat2;\n  let {\n    treeData: treeDataFromProps = {}\n  } = _ref;\n  const treeData = useSelector(getFolderTree);\n  const selectedUser = useSelector(getSelectedUser);\n  const isLoading = useSelector(getIsLoading);\n  const {\n    id: userId\n  } = useParams();\n  const [postUserData, {\n    isLoading: isPosting\n  }] = usePostUserDataMutation();\n  const sharedFileIds = useMemo(() => {\n    var _selectedUser$userDat;\n    return (selectedUser === null || selectedUser === void 0 ? void 0 : (_selectedUser$userDat = selectedUser.userData) === null || _selectedUser$userDat === void 0 ? void 0 : _selectedUser$userDat.sharedFileIds) || [];\n  }, [selectedUser === null || selectedUser === void 0 ? void 0 : (_selectedUser$userDat2 = selectedUser.userData) === null || _selectedUser$userDat2 === void 0 ? void 0 : _selectedUser$userDat2.sharedFileIds]);\n  const formData = useMemo(() => Object.assign({}, ...sharedFileIds.map(id => ({\n    [id]: true\n  }))), [sharedFileIds]);\n  const handleSubmit = async selectedIds => {\n    try {\n      await postUserData({\n        userId,\n        sharedFileIds: selectedIds\n      });\n    } catch (error) {\n      console.log(error);\n    }\n  };\n  const makeToast = () => {\n    console.log(\"\");\n  };\n  if (!Object.keys(selectedUser).length) return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"ml-4 font-semibold text-lg\",\n    children: \"Select User\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 48,\n    columnNumber: 12\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"ml-4 font-semibold text-lg\",\n      style: {\n        fontSize: \"30px\"\n      },\n      children: [selectedUser.username, \" (\", selectedUser.email, \")\", (isLoading || isPosting) && /*#__PURE__*/_jsxDEV(CircularProgress, {\n        thickness: 5,\n        size: 20\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Check, {\n      treeData: treeData,\n      formData: formData,\n      doSubmit: [handleSubmit, makeToast]\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 51,\n    columnNumber: 5\n  }, this);\n};\n_s(ShareFiles, \"KcfUhs18qzyB+H5llivXyyCs2wI=\", false, function () {\n  return [useSelector, useSelector, useSelector, useParams, usePostUserDataMutation];\n});\n_c = ShareFiles;\nexport default ShareFiles;\nvar _c;\n$RefreshReg$(_c, \"ShareFiles\");","map":{"version":3,"names":["CircularProgress","React","useMemo","useSelector","useParams","usePostUserDataMutation","Check","getFolderTree","getIsLoading","getSelectedUser","ShareFiles","treeData","treeDataFromProps","selectedUser","isLoading","id","userId","postUserData","isPosting","sharedFileIds","userData","formData","Object","assign","map","handleSubmit","selectedIds","error","console","log","makeToast","keys","length","fontSize","username","email"],"sources":["/Users/akwg7/Documents/react/RISE1/file-explorer-rise/frontend/src/pages/ShareFilesPage/ShareFiles.jsx"],"sourcesContent":["import { CircularProgress } from \"@mui/material\";\nimport React, { useMemo } from \"react\";\nimport { useSelector } from \"react-redux\";\nimport { useParams } from \"react-router-dom\";\nimport { usePostUserDataMutation } from \"../../apiServices/usersService\";\nimport Check from \"../../components/CheckBox/Check\";\nimport {\n  getFolderTree,\n  getIsLoading,\n  getSelectedUser,\n} from \"./../../redux/folderTree/folderTreeSlice\";\n\nconst ShareFiles = ({ treeData: treeDataFromProps = {} }) => {\n  const treeData = useSelector(getFolderTree);\n  const selectedUser = useSelector(getSelectedUser);\n  const isLoading = useSelector(getIsLoading);\n\n  const { id: userId } = useParams();\n\n  const [postUserData, { isLoading: isPosting }] = usePostUserDataMutation();\n\n  const sharedFileIds = useMemo(\n    () => selectedUser?.userData?.sharedFileIds || [],\n    [selectedUser?.userData?.sharedFileIds]\n  );\n\n  const formData = useMemo(\n    () => Object.assign({}, ...sharedFileIds.map((id) => ({ [id]: true }))),\n    [sharedFileIds]\n  );\n\n  const handleSubmit = async (selectedIds) => {\n    try {\n      await postUserData({\n        userId,\n        sharedFileIds: selectedIds,\n      });\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  const makeToast = () => {\n    console.log(\"\");\n  };\n\n  if (!Object.keys(selectedUser).length)\n    return <div className=\"ml-4 font-semibold text-lg\">Select User</div>;\n\n  return (\n    <div>\n      <div className=\"ml-4 font-semibold text-lg\" style={{ fontSize: \"30px\" }}>\n        {selectedUser.username} ({selectedUser.email})\n        {(isLoading || isPosting) && (\n          <CircularProgress thickness={5} size={20} />\n        )}\n      </div>\n      <Check\n        treeData={treeData}\n        formData={formData}\n        doSubmit={[handleSubmit, makeToast]}\n      />\n    </div>\n  );\n};\n\nexport default ShareFiles;\n"],"mappings":";;AAAA,SAASA,gBAAgB,QAAQ,eAAe;AAChD,OAAOC,KAAK,IAAIC,OAAO,QAAQ,OAAO;AACtC,SAASC,WAAW,QAAQ,aAAa;AACzC,SAASC,SAAS,QAAQ,kBAAkB;AAC5C,SAASC,uBAAuB,QAAQ,gCAAgC;AACxE,OAAOC,KAAK,MAAM,iCAAiC;AACnD,SACEC,aAAa,EACbC,YAAY,EACZC,eAAe,QACV,0CAA0C;AAAC;AAElD,MAAMC,UAAU,GAAG,QAA0C;EAAA;EAAA;EAAA,IAAzC;IAAEC,QAAQ,EAAEC,iBAAiB,GAAG,CAAC;EAAE,CAAC;EACtD,MAAMD,QAAQ,GAAGR,WAAW,CAACI,aAAa,CAAC;EAC3C,MAAMM,YAAY,GAAGV,WAAW,CAACM,eAAe,CAAC;EACjD,MAAMK,SAAS,GAAGX,WAAW,CAACK,YAAY,CAAC;EAE3C,MAAM;IAAEO,EAAE,EAAEC;EAAO,CAAC,GAAGZ,SAAS,EAAE;EAElC,MAAM,CAACa,YAAY,EAAE;IAAEH,SAAS,EAAEI;EAAU,CAAC,CAAC,GAAGb,uBAAuB,EAAE;EAE1E,MAAMc,aAAa,GAAGjB,OAAO,CAC3B;IAAA;IAAA,OAAM,CAAAW,YAAY,aAAZA,YAAY,gDAAZA,YAAY,CAAEO,QAAQ,0DAAtB,sBAAwBD,aAAa,KAAI,EAAE;EAAA,GACjD,CAACN,YAAY,aAAZA,YAAY,iDAAZA,YAAY,CAAEO,QAAQ,2DAAtB,uBAAwBD,aAAa,CAAC,CACxC;EAED,MAAME,QAAQ,GAAGnB,OAAO,CACtB,MAAMoB,MAAM,CAACC,MAAM,CAAC,CAAC,CAAC,EAAE,GAAGJ,aAAa,CAACK,GAAG,CAAET,EAAE,KAAM;IAAE,CAACA,EAAE,GAAG;EAAK,CAAC,CAAC,CAAC,CAAC,EACvE,CAACI,aAAa,CAAC,CAChB;EAED,MAAMM,YAAY,GAAG,MAAOC,WAAW,IAAK;IAC1C,IAAI;MACF,MAAMT,YAAY,CAAC;QACjBD,MAAM;QACNG,aAAa,EAAEO;MACjB,CAAC,CAAC;IACJ,CAAC,CAAC,OAAOC,KAAK,EAAE;MACdC,OAAO,CAACC,GAAG,CAACF,KAAK,CAAC;IACpB;EACF,CAAC;EAED,MAAMG,SAAS,GAAG,MAAM;IACtBF,OAAO,CAACC,GAAG,CAAC,EAAE,CAAC;EACjB,CAAC;EAED,IAAI,CAACP,MAAM,CAACS,IAAI,CAAClB,YAAY,CAAC,CAACmB,MAAM,EACnC,oBAAO;IAAK,SAAS,EAAC,4BAA4B;IAAA;EAAA;IAAA;IAAA;IAAA;EAAA,QAAkB;EAEtE,oBACE;IAAA,wBACE;MAAK,SAAS,EAAC,4BAA4B;MAAC,KAAK,EAAE;QAAEC,QAAQ,EAAE;MAAO,CAAE;MAAA,WACrEpB,YAAY,CAACqB,QAAQ,QAAIrB,YAAY,CAACsB,KAAK,OAC3C,CAACrB,SAAS,IAAII,SAAS,kBACtB,QAAC,gBAAgB;QAAC,SAAS,EAAE,CAAE;QAAC,IAAI,EAAE;MAAG;QAAA;QAAA;QAAA;MAAA,QAC1C;IAAA;MAAA;MAAA;MAAA;IAAA,QACG,eACN,QAAC,KAAK;MACJ,QAAQ,EAAEP,QAAS;MACnB,QAAQ,EAAEU,QAAS;MACnB,QAAQ,EAAE,CAACI,YAAY,EAAEK,SAAS;IAAE;MAAA;MAAA;MAAA;IAAA,QACpC;EAAA;IAAA;IAAA;IAAA;EAAA,QACE;AAEV,CAAC;AAAC,GApDIpB,UAAU;EAAA,QACGP,WAAW,EACPA,WAAW,EACdA,WAAW,EAENC,SAAS,EAEiBC,uBAAuB;AAAA;AAAA,KAPpEK,UAAU;AAsDhB,eAAeA,UAAU;AAAC;AAAA"},"metadata":{},"sourceType":"module"}